<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listado Usuarios</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,700;1,100;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/productList.css" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">


    <script
      src="https://kit.fontawesome.com/58f19d8ff4.js"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  </head>
  
  <body>
    <%- include ('../partials/header') %>
    <main>

      <div class="container wow fadeIn animated" data-aos="zoom-in-down" data-aos-duration="1000">
        <h1 class="mt-5 mb-3 h1 text-center list-title"> Listado de usuarios</h1>
        <hr style="border-top: 6px solid; border-radius: 10px;">
        <div class="card my-5" style="margin-bottom: 0rem!important">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped mb-0">
                <thead>
                  <tr>
                    <th style="width: 50px;">
                      <strong>Id</strong>
                    </th>
                    <th style="width: 50px;">
                      <strong>Imagen</strong>
                    </th>
                    <th class="th-lg">
                      <strong>Nombre</strong>
                    </th>
                    <th class="th-lg ">
                      <strong>Apellido</strong>
                    </th>
                    <th class="th-lg ">
                      <strong>Rol</strong>
                    </th>
                    <th class="text-center">
                      <strong>Usuario</strong>
                    </th>
                    <th class="text-center">
                      <strong>Email</strong>
                    </th>
                    <th style="width: 50px;" class="ml-20">
                      <strong>Ver</strong>
                    </th>
                    <th style="width: 50px;">
                      <strong>Editar</strong>
                    </th>
                    <th style="width: 50px;">
                      <strong>Borrar</strong>
                    </th>
                  </tr>
                </thead>
                <tbody class="cartRows">

                  <% users.forEach(user => {%>

                    <tr style="vertical-align: middle">
                      <td><%= user.id %></td>
                      <td class="align-middle text-center">
                      <% if (user.img) { %>
                        <img style="height: 33px; width: 33px; object-fit: cover; border-radius: 50%;" src="/images/users/<%= user.img.name %>" alt="imagen usuario">
                        <% } else { %>
                           <img style="height: 33px; width: 33px; object-fit: cover; border-radius: 50%;" src="/images/users/default-icon.png" alt="imagen usuario">
                        <% } %>
                      </td>
                      <td><%= user.name %></td>
                      <td><%= user.lastName %></td>
                      <% if (user.rol_id == 2) { %>
                        <td class="text-primary"><%= user.role.name %></td>     
                      <% } else { %>
                          <td><%= user.role.name %></td>     
                        <% } %>

                      <td class="text-center"><%= user.nickname %></td>
                      <td class="text-center"><%= user.email %></td>
                      <td class="text-center">
                        <button class="btn btn-primary btn-sm">
                          <a style="color: white;" href="/user/profile/<%= user.id %>"><i class="fa-solid fa-eye"></i></a>
                        </button>
                      </td>
                      <td class="text-center">
                        <button class="btn btn-success btn-sm">
                          <a style="color: unset;" href="/user/profile/edit/<%= user.id %>"><i class="fa-solid fa-user-pen"></i></a>
                        </button>
                      </td>
                      <% if (locals.userLogged.id != user.id) { %>
                        <td class="text-center">
                          <form class="delete" data-userdelete="<%= user.id %>" method="post">
                            <button type="submit" class="btn btn-danger btn-sm">
                              <i class="fas fa-trash"></i>
                            </button>
                          </form>
                        </td>
                      <% } else { %>
                          <td class="text-center"></td>
                        <% } %>
                    </tr>
                  <% }) %>

              
                  
                
                </tbody>
              </table>
            
          </div>
        </div>
      </div>






        
    </main>
    <%- include ('../partials/footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script src="/js/dropdownMenu.js"></script>
    <script src="/js/aos.js"></script>
    <script src="/js/confirmDeleteUserList.js"></script>


  </body>
</html>
